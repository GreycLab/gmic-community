<!DOCTYPE html>
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="tutorial.css">
<script type="text/javascript" src="highslide/highslide.js"></script>
<link rel="stylesheet" type="text/css" href="highslide/highslide.css" />
<script type="text/javascript">
hs.graphicsDir = 'highslide/graphics/';
hs.wrapperClassName = 'wide-border';
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<body>


      



<h1>Trigometric And Inverse Trigometric Commands</h1>
<p>The trigometric commands, -sin, -cos, and -tan interpret channel intensities of pixels as angular radian measures and translate these values, respectively, to sine, cosine or tangent quantities. None take additional command line parameters.</p>
<p>For example, we may generate a ramp image with pixel intensities ranging from zero to 4*&pi;. -sin replaces each pixel in this image, i, with sin(i):</p>
<p><code>gmic 200,200,1,1,4*pi*x/w --sin[-1] <a target="_parent" href="http://gmic.eu/reference.shtml#output">-output</a>[-1]sine.cimg</code></p>
<p>Next, we can replace each pixel, sin(i) with its trigometric inverse, asin(sin(i)).</p>
<p><code>gmic <a target="_parent" href="_input.shtml">-input</a> sine.cimg -asin[-1] <a target="_parent" href="http://gmic.eu/reference.shtml#output">-output</a> asine.cimg</code></p>
<p>This generates a sawtooth wave instead of restoring the original ramp, as the trigometric functions are periodic, mapping perodic series from the input to single output values. For example,&nbsp; &pi;/2, 5&pi;/2, 9&pi;/2... all evaluate to unity under the trigometric sine function. The inverse trigometric functions have no way of knowing whatever periodic multiplicity may have been in the original data, so map input values to a single, primary range.&nbsp;</p>
<table rules="all" class="table table-striped" border="1">
<tbody>
<tr>
<td width="256"><img style="margin: 3px; border: 0px solid #808080; vertical-align: top;" src="http://www.particularart.com/static/media/uploads/command_reference/trig/ramp.png" title="Ramp from zero to 4*pi" /></td>
<td width="256"><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sine.png" title="Evaluation of Ramp with the -sin command" class="img_right_nospacetop" style="margin: 3px; border: 0px solid #808080; vertical-align: baseline;" height="200" width="200" /></td>
<td width="256"><img style="margin: 3px; border: 0px solid #808080; vertical-align: baseline;" class="img_block" title="Sawtooth wave" src="http://www.particularart.com/static/media/uploads/command_reference/trig/asine.png" height="200" width="200" /></td>
<td><a target="_parent" title="Ramp, Sine &amp; Arc Sine Functions" href="img/trigometric-and-inverse-trigometric-commands_trig_large.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/trig_thumb.png" style="margin: 3px; border: 0px solid #808080; vertical-align: baseline;" /></a></td>
</tr>
<tr>
<td>Ramp image <a target="_parent" href="conjuring-images.shtml">autogenerated</a> on the command line. It ranges in intensity from zero (left) to 4*&pi; (right).</td>
<td>After the -sin command operated on the image to the left, and saved as sine.cimg. It ranges in intensity from -1 (black) to 1 (white). In essence, it treated each pixel in the image on the left as an angular measure in radians and converted the pixel to the corresponding sine value.</td>
<td>After the inverse trigometric command, -asin[-1]&nbsp; operated on the sine wave image to the left, a sawtooth wave resulted. It treated pixels in the image on the left as sine values and converted each pixel to a radian measure in the range &minus;&pi;/2 to &pi;/2.</td>
<td>A set of intensity graphs from the middle horizontal line taken from each of the three images on the left (click on the graph for a larger version).</td>
</tr>
</tbody>
</table>
<h2>Application</h2>
<p>Both the -sin and -cos commands may be harnessed to highlight small variations in data. The gradient backgrounds at the beginning of the walkthrough, below, are meant to be composited into successive animation frames. Some shimmer was seen in this background during a test run,&nbsp; though the gradients seem innocent of any wrongdoing.</p>
<p>We scale the intensity of these gradients up to a high multiple of pi, so that the -sin (or -cos) commands can translate the extended range into a large number of cycles, each having short wavelengths, a few tens of pixels each. If the original images are identical, so would be the cyclic patterns generated by the trigometric functions. Overlaying one translated background on top of the other would show no misalignment of cyclic patterns. However, a variation between gradients, hard to perceive in the originals, would be reflected in a mismatch of cyclic patterns as differences in intensities in a particular locale would be reflected in wave patterns shifting to different places. The pattern misalignment would be manifestly obvious, given the short wavelength patterns. Details follow.</p>
<h3>Command</h3>
<p><code>gmic <a target="_parent" href="_input.shtml">-input</a> sheen.png <a target="_parent" href="_input.shtml">-input</a> sheen_2.png <a target="_parent" href="http://gmic.eu/reference.shtml#luminance">--luminance</a> <a target="_parent" href="_normalize.shtml">-normalize</a> 0,{30*pi} \<br /> --sin[-2,-1] <a target="_parent" href="http://gmic.eu/reference.shtml#append">-append</a>[-2,-1] c <a target="_parent" href="_normalize.shtml">-normalize</a>[^0,1] 0,255 <a target="_parent" href="_display.shtml">-display</a> <a target="_parent" href="http://gmic.eu/reference.shtml#output">-output</a>[^0,1] sheen_o.png</code></p>
<h3>Walkthrough</h3>
<table id="trig_walk" frame="border" rules="all" class="table table-striped" style="border-color: #808080; border-width: 1px;" border="1" align="center">
<tbody>
<tr>
<td width="256"><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sheen.png" title="Background plate. Frame 0" class="img_block" style="margin: 0px; border: 0px solid #808080; vertical-align: baseline;" height="150" width="150" /><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sheen_2.png" title="Background plate. Frame 1" class="img_block" style="margin: 0px; vertical-align: baseline; border: 0px solid #808080;" height="150" width="150" /></td>
<td>
<h3>1.</h3>
<p>These two frames, sheen.png and sheen_2.png seem identical at first glance, though studied observation over time will reveal differences. This walkthrough will render such differences quickly an unambiguously. &nbsp;</p>
</td>
</tr>
<tr>
<td width="256"><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sheen_o_000000.png" title="Luminance of Background Plate: Frame 0" class="img_block" style="margin: 0px; border: 0px solid #808080; vertical-align: baseline;" height="150" width="150" /><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sheen_o_000001.png" title="Luminance of Background Plate: Frame 1" class="img_block" style="margin: 0px; border: 0px solid #808080; vertical-align: baseline;" height="150" width="150" /></td>
<td>
<h3>2.</h3>
<p><code>gmic <a target="_parent" href="_input.shtml">-input</a> sheen.png <a target="_parent" href="_input.shtml">-input</a> sheen_2.png <a target="_parent" href="http://gmic.eu/reference.shtml#luminance">--luminance</a> <a target="_parent" href="_normalize.shtml">-normalize</a> 0,{30*pi}...</code></p>
<p>We convert the frames to grayscale and normalize them to the range of zero to thirty times pi. After processing by either -sin or -cos, fifteen complete cycles, of about thirteen pixels each cycle, will span each image. The precise locations of these cycles depend upon the intensity of the image and variations in such between the two images will become manifest by misalignment of cycles. Given the narrow wavelength, even a small variation between the two frames will be distinctly obvious.</p>
</td>
</tr>
<tr>
<td width="256"><img src="http://www.particularart.com/static/media/uploads/command_reference/trig/sheen_o_000002.png" title="Trigometric renderings as a Displacement Field" class="img_block" style="margin: 0px; border: 0px solid #808080; vertical-align: baseline;" height="150" width="150" /></td>
<td>
<h3>3.</h3>
<p><code>...--sin[-2,-1] <a target="_parent" href="http://gmic.eu/reference.shtml#append">-append</a>[-2,-1] c <a target="_parent" href="_normalize.shtml">-normalize</a>[^0,1] 0,255 <a target="_parent" href="_display.shtml">-display</a>...</code></p>
<p>We overlay the two images by moving them into the channels of one image, specifically, by appending two images along the <a target="_parent" href="conjuring-images.shtml">'spectral direction</a>'. It is clear from the misalignment of the cycle pattern that the two gradients are not exactly the same. The distortion pattern can even tell us by how much the gradients can differ. Fifteen cycles across two hundred pixel images give rise to about 13 pixels per cycle. About halfway down and a third of the way from the left, the displacement appears to be as much as one cycle, or thirteen pixels. The lefthand gradient in panel two corresponds to channel 0 (red) in the test image to the left, while the righthand gradient in panel two corresponds to channel 1 (green), this, the order these two patterns occupied on the image stack when the append command was invoke. Armed with this knowlege, the straight red pattern indicates that the first gradient changes exactly in the x direction only at a constant rate, for the cycles do not vary from the vertical. They do so in the green test pattern, however - the variation from black to white is non-linear.</p>
</td>
</tr>
</tbody>
</table>
<p></p>
<p><em>Garry Osgood</em></p>



   
</body></html>